<!-- templates/registration/home.html -->
{% extends 'base.html' %}

{% block title %}Josephite Tech Carnival 2025 - Registration{% endblock %}

{% block extra_head %}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
{% endblock %}

{% block styles %}
<style>
    .hero-section {
        position: relative;
        overflow: hidden;
    }

    .hero-section.has-gradient {
        background: linear-gradient(to right, #4F46E5, #8B5CF6, #EC4899);
    }

    .full-width-hero {
        width: 100vw;
        left: 50%;
        right: 50%;
        margin-left: -50vw;
        margin-right: -50vw;
        border-radius: 0;
    }

    #bg-video {
        position: absolute;
        top: 50%;
        left: 50%;
        min-width: 100%;
        min-height: 100%;
        width: auto;
        height: auto;
        z-index: 0;
        transform: translateX(-50%) translateY(-50%);
        background-size: cover;
        transition: opacity 1s ease-in-out;
        opacity: 1;
    }

    .slideshow-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
    }

    .slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-size: cover;
        background-position: center;
        opacity: 0;
        transition: opacity 1s ease-in-out;
        z-index: 1;
    }

    .slide.active {
        opacity: 1;
    }

    .hero-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 1;
    }
    
    .hero-content {
        position: relative;
        z-index: 2;
    }

    .hero-content .tech-title {
        font-family: 'Orbitron', sans-serif;
        background: linear-gradient(to right, #a855f7, #ec4899, #f59e0b, #a855f7);
        background-size: 200% auto;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: revolve 5s linear infinite;
    }

    @keyframes revolve {
        to {
            background-position: 200% center;
        }
    }

    .hero-content p {
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    .register-now-btn {
        animation: glow 2s infinite alternate;
    }

    @keyframes glow {
        from {
            box-shadow: 0 0 10px -5px #f59e0b;
        }
        to {
            box-shadow: 0 0 20px 5px #f59e0b;
        }
    }

    .card-glow::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at 50% 0, rgba(128, 0, 128, 0.5), rgba(0, 0, 255, 0.5));
        filter: blur(20px);
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
        z-index: -1;
        border-radius: 12px;
    }

    .card-glow:hover::before {
        opacity: 0.5;
    }
</style>
{% endblock %}

{% block content %}
<div class="relative">
    <!-- Hero Section -->
    <div class="hero-section text-white mb-12 shadow-2xl 
        {% if background_video or slideshow_images %}full-width-hero{% else %}has-gradient rounded-2xl{% endif %}">
        {% if background_video %}
            <video autoplay muted loop id="bg-video">
                <source src="{{ background_video.file.url }}" type="video/mp4">
            </video>
        {% endif %}
        {% if slideshow_images %}
            <div class="slideshow-container">
                {% for image in slideshow_images %}
                    <div class="slide" style="background-image: url('{{ image.file.url }}');"></div>
                {% endfor %}
            </div>
        {% endif %}
        {% if background_video or slideshow_images %}
            <div class="hero-overlay"></div>
        {% endif %}
        <div class="hero-content px-4 sm:px-8 py-12 md:py-24">
            <div class="max-w-4xl mx-auto text-center">
                <h1 class="tech-title text-3xl sm:text-4xl md:text-6xl font-bold mb-6">
                    SJIS 1ST INTERSCHOOL TECH CARNIVAL 2025
                </h1>
                <p class="text-lg sm:text-xl md:text-2xl mb-8 text-blue-100">
                    Join the Ultimate Technology Competition & Showcase
                </p>
                {% if countdown %}
                <div id="countdown-container" class="text-white text-center mb-8">
                    <h3 class="text-2xl sm:text-3xl font-bold text-yellow-300 mb-6 tracking-wider animate-pulse">{{ countdown.title }}</h3>
                    <div id="countdown-timer" class="grid grid-cols-2 sm:grid-cols-4 gap-4 sm:gap-8 max-w-3xl mx-auto">
                        <div class="bg-white bg-opacity-10 backdrop-blur-md rounded-2xl p-4 sm:p-6 shadow-lg border border-white/20 transform hover:scale-105 transition-transform duration-300">
                            <div id="days" class="text-4xl sm:text-6xl font-bold">0</div>
                            <div class="text-sm sm:text-base mt-2 uppercase tracking-widest">Days</div>
                        </div>
                        <div class="bg-white bg-opacity-10 backdrop-blur-md rounded-2xl p-4 sm:p-6 shadow-lg border border-white/20 transform hover:scale-105 transition-transform duration-300">
                            <div id="hours" class="text-4xl sm:text-6xl font-bold">0</div>
                            <div class="text-sm sm:text-base mt-2 uppercase tracking-widest">Hours</div>
                        </div>
                        <div class="bg-white bg-opacity-10 backdrop-blur-md rounded-2xl p-4 sm:p-6 shadow-lg border border-white/20 transform hover:scale-105 transition-transform duration-300">
                            <div id="minutes" class="text-4xl sm:text-6xl font-bold">0</div>
                            <div class="text-sm sm:text-base mt-2 uppercase tracking-widest">Minutes</div>
                        </div>
                        <div class="bg-white bg-opacity-10 backdrop-blur-md rounded-2xl p-4 sm:p-6 shadow-lg border border-white/20 transform hover:scale-105 transition-transform duration-300">
                            <div id="seconds" class="text-4xl sm:text-6xl font-bold">0</div>
                            <div class="text-sm sm:text-base mt-2 uppercase tracking-widest">Seconds</div>
                        </div>
                    </div>
                </div>
                {% else %}
                <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 sm:gap-6 mb-8 text-white">
                    <div class="flex flex-col items-center justify-center bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-4 sm:p-6 transform hover:scale-110 transition-transform duration-300">
                        <i class="fas fa-gamepad text-4xl text-green-300 mb-2"></i>
                        <span class="font-semibold">Gaming</span>
                    </div>
                    <div class="flex flex-col items-center justify-center bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-4 sm:p-6 transform hover:scale-110 transition-transform duration-300">
                        <i class="fas fa-code text-4xl text-blue-300 mb-2"></i>
                        <span class="font-semibold">Coding</span>
                    </div>
                    <div class="flex flex-col items-center justify-center bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-4 sm:p-6 transform hover:scale-110 transition-transform duration-300">
                        <i class="fas fa-robot text-4xl text-purple-300 mb-2"></i>
                        <span class="font-semibold">Robotics</span>
                    </div>
                    <div class="flex flex-col items-center justify-center bg-white bg-opacity-10 backdrop-blur-sm rounded-xl p-4 sm:p-6 transform hover:scale-110 transition-transform duration-300">
                        <i class="fas fa-vr-cardboard text-4xl text-pink-300 mb-2"></i>
                        <span class="font-semibold">VR/AR</span>
                    </div>
                </div>
                {% endif %}
                <a href="{% url 'register' %}" class="register-now-btn inline-flex items-center bg-yellow-500 hover:bg-yellow-600 text-black font-bold py-3 sm:py-4 px-6 sm:px-8 rounded-xl text-base sm:text-lg transition-all transform hover:scale-105 shadow-lg">
                    <i class="fas fa-rocket mr-2"></i>
                    <span class="hidden sm:inline">Register Now - Start Your Journey!</span>
                    <span class="sm:hidden">Register Now!</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Social Media Links -->
    {% if social_media_profiles %}
    <div class="flex justify-center space-x-6 mb-12">
        {% for profile in social_media_profiles %}
            <a href="{{ profile.url }}" target="_blank" class="text-gray-500 hover:text-gray-800 transition-colors">
                <i class="fab fa-{{ profile.platform|lower }} fa-2x"></i>
            </a>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Events Showcase -->
    <div id="events" class="mb-12">
        <h2 class="text-2xl sm:text-3xl font-bold text-center mb-8 text-gray-800">
            <i class="fas fa-star text-yellow-500 mr-2"></i>
            Latest Events
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for event in events %}
            <div class="card-glow relative group transform hover:-translate-y-1 transition-transform duration-300">
                <div class="relative bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 overflow-hidden h-full z-10">
                    <!-- Event Card Header with Gradient -->
                    <div class="bg-gradient-to-r from-blue-500 to-purple-600 p-4 sm:p-6">
                        <div class="flex items-center justify-between mb-2">
                            <h3 class="text-lg sm:text-xl font-bold text-white">{{ event.name }}</h3>
                            <div class="bg-white bg-opacity-20 backdrop-blur-sm rounded-full px-3 py-1">
                                <span class="text-white text-sm font-semibold">৳{{ event.fee }}</span>
                            </div>
                        </div>
                        <div class="flex items-center text-blue-100 text-sm">
                            <i class="fas fa-calendar-alt mr-2"></i>
                            <span>Registration Open</span>
                        </div>
                    </div>
                    
                    <!-- Event Card Body -->
                    <div class="p-4 sm:p-6">
                        <p class="text-gray-600 mb-4 text-sm sm:text-base leading-relaxed">{{ event.description }}</p>
                        
                        <!-- Event Features -->
                        <div class="flex flex-wrap gap-2 mb-4">
                            <span class="bg-blue-50 text-blue-700 text-xs font-medium px-2 py-1 rounded-full">
                                <i class="fas fa-trophy mr-1"></i>Prizes
                            </span>
                            <span class="bg-green-50 text-green-700 text-xs font-medium px-2 py-1 rounded-full">
                                <i class="fas fa-certificate mr-1"></i>Certificate
                            </span>
                            {% if event.event_type == 'TEAM' %}
                            <span class="bg-purple-50 text-purple-700 text-xs font-medium px-2 py-1 rounded-full">
                                <i class="fas fa-users mr-1"></i>
                                Team Event
                                {% if event.max_team_size %}
                                    (Max: {{ event.max_team_size }} members)
                                {% endif %}
                            </span>
                            {% else %}
                            <span class="bg-indigo-50 text-indigo-700 text-xs font-medium px-2 py-1 rounded-full">
                                <i class="fas fa-user mr-1"></i>
                                Individual Event
                            </span>
                            {% endif %}
                        </div>
                        
                        <!-- Register Button -->
                        <a href="{% url 'register' %}" class="block w-full bg-gradient-to-r from-primary to-secondary text-white text-center py-2 sm:py-3 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform group-hover:scale-105">
                            <i class="fas fa-arrow-right mr-2"></i>Join This Event
                        </a>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-span-full text-center py-12">
                <div class="bg-white rounded-xl shadow-md p-8 sm:p-12">
                    <div class="bg-gray-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6">
                        <i class="fas fa-calendar-times text-3xl text-gray-400"></i>
                    </div>
                    <h3 class="text-xl font-semibold text-gray-700 mb-2">No Events Available</h3>
                    <p class="text-gray-500 mb-6">Events will be announced soon. Stay tuned!</p>
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <p class="text-blue-700 text-sm">
                            <i class="fas fa-bell mr-2"></i>
                            Subscribe to our newsletter to get notified when events are available
                        </p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Features -->
    <div class="bg-white rounded-2xl shadow-lg p-6 sm:p-8 mb-12 border-t-4 border-primary">
        <h2 class="text-2xl sm:text-3xl font-bold text-center mb-8 text-gray-900">
            <i class="fas fa-star text-yellow-500 mr-2"></i>
            Why Join Josephite Tech Carnival?
        </h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="text-center group">
                <div class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-blue-200 transition-colors">
                    <i class="fas fa-trophy text-blue-600 text-2xl"></i>
                </div>
                <h3 class="font-semibold mb-2">Compete & Win</h3>
                <p class="text-gray-600 text-sm">Show your skills and win exciting prizes</p>
            </div>
            <div class="text-center group">
                <div class="bg-green-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-green-200 transition-colors">
                    <i class="fas fa-certificate text-green-600 text-2xl"></i>
                </div>
                <h3 class="font-semibold mb-2">Get Certified</h3>
                <p class="text-gray-600 text-sm">Receive participation certificates</p>
            </div>
            <div class="text-center group">
                <div class="bg-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-purple-200 transition-colors">
                    <i class="fas fa-users text-purple-600 text-2xl"></i>
                </div>
                <h3 class="font-semibold mb-2">Network</h3>
                <p class="text-gray-600 text-sm">Meet like-minded tech enthusiasts</p>
            </div>
            <div class="text-center group">
                <div class="bg-yellow-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4 group-hover:bg-yellow-200 transition-colors">
                    <i class="fas fa-lightbulb text-yellow-600 text-2xl"></i>
                </div>
                <h3 class="font-semibold mb-2">Learn & Grow</h3>
                <p class="text-gray-600 text-sm">Enhance your technical skills</p>
            </div>
        </div>
    </div>

    <!-- Registration Process -->
    <div class="bg-white rounded-2xl shadow-lg p-6 sm:p-8 border-t-4 border-secondary">
        <h2 class="text-2xl sm:text-3xl font-bold text-center mb-8 text-gray-900">
            <i class="fas fa-clipboard-list text-purple-600 mr-2"></i>
            Simple Registration Process
        </h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
            <div class="text-center">
                <div class="bg-blue-500 text-white w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 text-xl font-bold shadow-lg">1</div>
                <h3 class="font-semibold mb-2">Fill Form</h3>
                <p class="text-gray-600 text-sm">Enter your details and select events</p>
            </div>
            <div class="text-center">
                <div class="bg-green-500 text-white w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 text-xl font-bold shadow-lg">2</div>
                <h3 class="font-semibold mb-2">Choose Payment</h3>
                <p class="text-gray-600 text-sm">Pay via bKash, Rocket, or Nagad</p>
            </div>
            <div class="text-center">
                <div class="bg-purple-500 text-white w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 text-xl font-bold shadow-lg">3</div>
                <h3 class="font-semibold mb-2">Get Receipt</h3>
                <p class="text-gray-600 text-sm">Receive confirmation via email</p>
            </div>
            <div class="text-center">
                <div class="bg-yellow-500 text-white w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 text-xl font-bold shadow-lg">4</div>
                <h3 class="font-semibold mb-2">Participate</h3>
                <p class="text-gray-600 text-sm">Join the carnival and compete!</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ block.super }}
{% if countdown %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const targetDate = new Date("{{ countdown.target_date.isoformat }}").getTime();

        const countdownInterval = setInterval(function() {
            const now = new Date().getTime();
            const distance = targetDate - now;

            if (distance < 0) {
                clearInterval(countdownInterval);
                document.getElementById("countdown-container").innerHTML = '<div class="text-2xl font-bold text-yellow-300">The event has started!</div>';
                return;
            }

            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById("days").innerText = days;
            document.getElementById("hours").innerText = hours;
            document.getElementById("minutes").innerText = minutes;
            document.getElementById("seconds").innerText = seconds;
        }, 1000);
    });
</script>
{% endif %}
{% if slideshow_images %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const slides = document.querySelectorAll('.slide');
        let currentSlide = 0;

        function showSlide(index) {
            slides.forEach((slide, i) => {
                slide.classList.remove('active');
                if (i === index) {
                    slide.classList.add('active');
                }
            });
        }

        function nextSlide() {
            currentSlide = (currentSlide + 1) % slides.length;
            showSlide(currentSlide);
        }

        if (slides.length > 0) {
            showSlide(currentSlide);
            setInterval(nextSlide, 5000); // Change slide every 5 seconds
        }
    });
</script>
{% endif %}
{% endblock %}